<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NIS2 Critical Infrastructure Checker - HYPERION</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --cyan: #00D4FF;
            --cyan-dark: #00a3cc;
            --blue: #1a73e8;
            --blue-dark: #1557b0;
            --green: #10a37f;
            --red: #dc2626;
            --orange: #ff9500;
            --yellow: #fbbf24;
            --purple: #8b5cf6;
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.7);
            --bg-gray: #f5f5f7;
            --border: rgba(255, 255, 255, 0.1);
            --dark-bg: #0A0E1A;
            --dark-card: #0F1420;
            --dark-border: #2a3548;
            --dark-lighter: #1a1f2e;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', 'Helvetica Neue', Helvetica, Arial, sans-serif;
            line-height: 1.47059;
            letter-spacing: -0.022em;
            color: var(--text-primary);
            background: var(--dark-bg);
            -webkit-font-smoothing: antialiased;
            min-height: 100vh;
            padding-top: 70px;
        }

        /* Navigation with Hamburger Menu */
        .site-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: rgba(10, 14, 26, 0.95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 16px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .back-link {
            font-size: 16px;
            color: #00D4FF;
            text-decoration: none;
            transition: opacity 0.2s;
        }

        .back-link:hover {
            opacity: 0.8;
        }

        .breadcrumb {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .breadcrumb a {
            color: var(--cyan);
            text-decoration: none;
            transition: opacity 0.3s;
        }

        .breadcrumb a:hover {
            opacity: 0.8;
        }

        .breadcrumb span {
            color: var(--text-secondary);
        }

        /* Container */
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 100px 22px 60px;
        }

        /* Welcome Screen */
        .welcome-screen {
            text-align: center;
            padding: 60px 0;
            display: none;
        }

        .welcome-screen.active {
            display: block;
        }

        .badge {
            display: inline-block;
            background: linear-gradient(135deg, var(--cyan), var(--cyan-dark));
            color: white;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 30px;
        }

        .welcome-screen h1 {
            font-size: 56px;
            line-height: 1.07143;
            font-weight: 600;
            letter-spacing: -0.005em;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--cyan), var(--cyan-dark));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .welcome-screen .subhead {
            font-size: 21px;
            line-height: 1.5;
            color: var(--text-secondary);
            max-width: 700px;
            margin: 0 auto 40px;
        }

        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 60px;
            margin: 50px 0;
            padding: 30px;
            background: var(--dark-card);
            border-radius: 20px;
            flex-wrap: wrap;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 600;
            color: var(--cyan);
            display: block;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .start-button {
            display: inline-block;
            padding: 16px 48px;
            background: linear-gradient(135deg, var(--cyan), var(--cyan-dark));
            color: white;
            text-decoration: none;
            border-radius: 100px;
            font-size: 17px;
            font-weight: 500;
            transition: all 0.3s;
            cursor: pointer;
            border: none;
            margin-top: 30px;
        }

        .start-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 212, 255, 0.3);
        }

        .disclaimer {
            font-size: 13px;
            color: var(--text-secondary);
            margin-top: 20px;
            opacity: 0.7;
        }

        /* Assessment Flow */
        .assessment-flow {
            display: none;
        }

        .assessment-flow.active {
            display: block;
        }

        /* Progress Bar */
        .progress-container {
            margin-bottom: 50px;
        }

        .progress-bar {
            height: 4px;
            background: var(--dark-card);
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--cyan), var(--cyan-dark));
            border-radius: 2px;
            transition: width 0.5s ease;
            width: 0%;
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
        }

        .progress-step {
            font-size: 13px;
            color: var(--text-secondary);
            opacity: 0.5;
            transition: opacity 0.3s;
        }

        .progress-step.active {
            opacity: 1;
            color: var(--cyan);
        }

        .progress-step.completed {
            opacity: 0.8;
            color: var(--green);
        }

        /* Assessment Step */
        .assessment-step {
            display: none;
            animation: fadeIn 0.3s;
        }

        .assessment-step.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .step-header {
            margin-bottom: 40px;
        }

        .step-title {
            font-size: 32px;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--text-primary);
        }

        .step-description {
            font-size: 18px;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 30px;
        }

        label {
            display: block;
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 12px;
            color: var(--text-primary);
        }

        select, input[type="number"], input[type="text"] {
            width: 100%;
            padding: 14px 18px;
            background: var(--dark-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 16px;
            transition: all 0.3s;
        }

        select:focus, input:focus {
            outline: none;
            border-color: var(--cyan);
            box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
        }

        select option {
            background: var(--dark-card);
            color: var(--text-primary);
        }

        .checkbox-group {
            display: grid;
            gap: 15px;
        }

        .checkbox-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 15px;
            background: var(--dark-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .checkbox-item:hover {
            border-color: var(--cyan);
            background: rgba(0, 212, 255, 0.05);
        }

        .checkbox-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-top: 2px;
            cursor: pointer;
        }

        .checkbox-label {
            flex: 1;
            font-size: 15px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .helper-text {
            font-size: 14px;
            color: var(--text-secondary);
            margin-top: 8px;
            line-height: 1.5;
        }

        /* Threshold Table */
        .threshold-table {
            background: var(--dark-card);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            overflow-x: auto;
        }

        .threshold-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .threshold-table th {
            background: var(--dark-lighter);
            padding: 12px;
            text-align: left;
            font-size: 14px;
            font-weight: 600;
            color: var(--cyan);
            border-bottom: 1px solid var(--border);
        }

        .threshold-table td {
            padding: 12px;
            font-size: 14px;
            color: var(--text-secondary);
            border-bottom: 1px solid var(--border);
        }

        .threshold-table tr:last-child td {
            border-bottom: none;
        }

        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            gap: 20px;
        }

        .nav-button {
            padding: 14px 32px;
            border-radius: 100px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
        }

        .prev-button {
            background: var(--dark-card);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .prev-button:hover {
            background: var(--dark-lighter);
            border-color: var(--cyan);
        }

        .next-button {
            background: linear-gradient(135deg, var(--cyan), var(--cyan-dark));
            color: white;
            flex: 1;
            max-width: 300px;
            margin-left: auto;
        }

        .next-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 212, 255, 0.3);
        }

        .next-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Results Screen */
        .results-screen {
            display: none;
        }

        .results-screen.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        .classification-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            border: 2px solid var(--border);
        }

        .classification-card.essential {
            border-color: var(--orange);
            background: linear-gradient(135deg, rgba(255, 149, 0, 0.1), rgba(255, 149, 0, 0.05));
        }

        .classification-card.important {
            border-color: var(--yellow);
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(251, 191, 36, 0.05));
        }

        .classification-card.not-in-scope {
            border-color: var(--green);
            background: linear-gradient(135deg, rgba(16, 163, 127, 0.1), rgba(16, 163, 127, 0.05));
        }

        .classification-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
        }

        .classification-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
        }

        .classification-icon.essential {
            background: var(--orange);
        }

        .classification-icon.important {
            background: var(--yellow);
        }

        .classification-icon.not-in-scope {
            background: var(--green);
        }

        .classification-title {
            flex: 1;
        }

        .classification-title h2 {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .classification-subtitle {
            font-size: 16px;
            color: var(--text-secondary);
        }

        .classification-details {
            display: grid;
            gap: 15px;
            padding: 20px;
            background: var(--dark-bg);
            border-radius: 12px;
            margin-top: 20px;
        }

        .detail-row {
            display: flex;
            gap: 15px;
        }

        .detail-label {
            font-weight: 500;
            color: var(--cyan);
            min-width: 120px;
        }

        .detail-value {
            color: var(--text-secondary);
        }

        /* Obligations Card */
        .obligations-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
        }

        .obligations-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 30px;
            color: var(--cyan);
        }

        .obligation-section {
            margin-bottom: 30px;
        }

        .obligation-section h4 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--text-primary);
        }

        .obligation-list {
            list-style: none;
            padding: 0;
        }

        .obligation-list li {
            padding: 10px 0;
            padding-left: 30px;
            position: relative;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .obligation-list li::before {
            content: '→';
            position: absolute;
            left: 0;
            color: var(--cyan);
            font-weight: bold;
        }

        .checkbox-list li::before {
            content: '□';
        }

        /* HYPERION Section */
        .hyperion-section {
            background: linear-gradient(135deg, var(--dark-card), var(--dark-lighter));
            border-radius: 20px;
            padding: 40px;
            margin: 40px 0;
            border: 1px solid var(--cyan);
        }

        .hyperion-title {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--cyan), var(--cyan-dark));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hyperion-intro {
            font-size: 16px;
            line-height: 1.6;
            color: var(--text-secondary);
            margin-bottom: 30px;
        }

        .hyperion-table {
            background: var(--dark-bg);
            border-radius: 12px;
            overflow: hidden;
        }

        .hyperion-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .hyperion-table th {
            background: var(--dark-lighter);
            padding: 15px;
            text-align: left;
            font-size: 14px;
            font-weight: 600;
            color: var(--cyan);
            border-bottom: 1px solid var(--border);
        }

        .hyperion-table td {
            padding: 15px;
            font-size: 14px;
            color: var(--text-secondary);
            border-bottom: 1px solid var(--border);
            vertical-align: top;
        }

        .hyperion-table tr:last-child td {
            border-bottom: none;
        }

        /* CTA Buttons */
        .cta-buttons {
            display: flex;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .cta-button {
            padding: 14px 32px;
            border-radius: 100px;
            font-size: 16px;
            font-weight: 500;
            text-decoration: none;
            transition: all 0.3s;
            display: inline-block;
            text-align: center;
            cursor: pointer;
            border: none;
        }

        .cta-primary {
            background: linear-gradient(135deg, var(--cyan), var(--cyan-dark));
            color: white;
        }

        .cta-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 212, 255, 0.3);
        }

        .cta-secondary {
            background: var(--dark-card);
            color: var(--cyan);
            border: 1px solid var(--cyan);
        }

        .cta-secondary:hover {
            background: rgba(0, 212, 255, 0.1);
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 40px 22px;
            border-top: 1px solid var(--border);
            margin-top: 60px;
        }

        .footer-disclaimer {
            font-size: 13px;
            color: var(--text-secondary);
            opacity: 0.7;
            max-width: 700px;
            margin: 0 auto 20px;
            line-height: 1.5;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 20px;
        }

        .footer-links a {
            color: var(--cyan);
            text-decoration: none;
            font-size: 14px;
            transition: opacity 0.3s;
        }

        .footer-links a:hover {
            opacity: 0.8;
        }

        .copyright {
            font-size: 13px;
            color: var(--text-secondary);
            opacity: 0.5;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .welcome-screen h1 {
                font-size: 42px;
            }

            .stats-bar {
                gap: 30px;
            }

            .nav-buttons {
                flex-direction: column;
            }

            .next-button {
                max-width: 100%;
            }

            .hyperion-table {
                overflow-x: auto;
            }

            .hyperion-table table {
                min-width: 500px;
            }

            .cta-buttons {
                flex-direction: column;
            }

            .cta-button {
                width: 100%;
            }
        }

        /* Print Styles */
        @media print {
            body {
                background: white;
                color: black;
            }

            nav, .nav-buttons, .start-button, .cta-buttons {
                display: none;
            }

            .classification-card, .obligations-card, .hyperion-section {
                page-break-inside: avoid;
                border: 1px solid #ccc;
            }

            * {
                color: black !important;
                background: white !important;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <header class="site-header">
        <div class="header-container">
            <a href="index.html" class="back-link">← Back to Hyperion</a>
        </div>
    </header>
    
    <!-- Breadcrumb below header -->
    <div style="margin-top: 20px; padding: 0 22px;">
        <div class="breadcrumb">
            <a href="index.html">HYPERION</a> <span>›</span> 
            <span>NIS2 Critical Infrastructure Checker</span>
        </div>
    </div>

    <div class="container">
        <!-- Welcome Screen -->
        <div class="welcome-screen active" id="welcome">
            <div class="badge">Compliance Assessment Tool</div>
            <h1>Are You Subject to NIS2?</h1>
            <p class="subhead">
                The Network and Information Security Directive 2 (NIS2) took effect October 2024. 
                This tool determines if your organization is classified as an Essential or Important Entity — 
                and what that means for your security obligations.
            </p>

            <div class="stats-bar">
                <div class="stat-item">
                    <span class="stat-value">October 2024</span>
                    <span class="stat-label">NIS2 now in effect</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value">€10M or 2%</span>
                    <span class="stat-label">Maximum penalty for Essential Entities</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value">18 Sectors</span>
                    <span class="stat-label">Covered by the directive</span>
                </div>
            </div>

            <button class="start-button" onclick="startAssessment()">Start Assessment →</button>
            <p class="disclaimer">Takes approximately 3 minutes. No data stored.</p>
        </div>

        <!-- Assessment Flow -->
        <div class="assessment-flow" id="assessment">
            <!-- Progress Bar -->
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar"></div>
                </div>
                <div class="progress-steps">
                    <span class="progress-step active" id="step-1-indicator">Sector</span>
                    <span class="progress-step" id="step-2-indicator">Size</span>
                    <span class="progress-step" id="step-3-indicator">Geographic</span>
                    <span class="progress-step" id="step-4-indicator">Designations</span>
                    <span class="progress-step" id="step-5-indicator">Exclusions</span>
                </div>
            </div>

            <!-- Step 1: Sector Selection -->
            <div class="assessment-step active" id="step-1">
                <div class="step-header">
                    <h2 class="step-title">What is your organization's primary sector of activity?</h2>
                    <p class="step-description">Select the sector that best describes your main business operations.</p>
                </div>

                <div class="form-group">
                    <label for="sector">Primary Sector</label>
                    <select id="sector" onchange="validateStep()">
                        <option value="">-- Select a sector --</option>
                        <optgroup label="ANNEX I - HIGHLY CRITICAL SECTORS">
                            <option value="energy">Energy (electricity, oil, gas, hydrogen, district heating/cooling)</option>
                            <option value="transport">Transport (air, rail, water, road)</option>
                            <option value="banking">Banking</option>
                            <option value="financial-infrastructure">Financial Market Infrastructure</option>
                            <option value="health">Health (healthcare providers, labs, medical devices, pharmaceuticals)</option>
                            <option value="drinking-water">Drinking Water (supply and distribution)</option>
                            <option value="waste-water">Waste Water</option>
                            <option value="digital-infrastructure">Digital Infrastructure (IXP, DNS, TLD, cloud, data centers, CDN, trust services)</option>
                            <option value="ict-service">ICT Service Management B2B (managed services, managed security)</option>
                            <option value="public-admin">Public Administration (central/regional/local government)</option>
                            <option value="space">Space (ground-based infrastructure)</option>
                        </optgroup>
                        <optgroup label="ANNEX II - OTHER CRITICAL SECTORS">
                            <option value="postal">Postal and Courier Services</option>
                            <option value="waste">Waste Management</option>
                            <option value="chemicals">Manufacture, Production, Distribution of Chemicals</option>
                            <option value="food">Food Production, Processing, Distribution</option>
                            <option value="manufacturing">Manufacturing (medical devices, computers, electrical, machinery, vehicles)</option>
                            <option value="digital-providers">Digital Providers (online marketplaces, search engines, social networks)</option>
                            <option value="research">Research Organizations</option>
                        </optgroup>
                        <option value="other">Other / Not Listed</option>
                    </select>
                    <p class="helper-text" id="sector-help"></p>
                </div>

                <div class="nav-buttons">
                    <button class="nav-button prev-button" style="visibility: hidden;">Previous</button>
                    <button class="nav-button next-button" onclick="nextStep()" disabled id="next-1">Continue</button>
                </div>
            </div>

            <!-- Step 2: Organization Size -->
            <div class="assessment-step" id="step-2">
                <div class="step-header">
                    <h2 class="step-title">What is your organization's size?</h2>
                    <p class="step-description">Enter your organization's employee count and financial metrics.</p>
                </div>

                <div class="form-group">
                    <label for="employees">Number of employees</label>
                    <input type="number" id="employees" placeholder="e.g., 150" onchange="validateStep()">
                </div>

                <div class="form-group">
                    <label for="turnover">Annual turnover (€)</label>
                    <input type="number" id="turnover" placeholder="e.g., 25000000" onchange="validateStep()">
                </div>

                <div class="form-group">
                    <label for="balance">Annual balance sheet total (€)</label>
                    <input type="number" id="balance" placeholder="e.g., 20000000" onchange="validateStep()">
                </div>

                <div class="threshold-table">
                    <h4 style="margin-bottom: 15px; color: var(--cyan);">SIZE THRESHOLDS</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>Category</th>
                                <th>Employees</th>
                                <th>Financial</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Large</strong></td>
                                <td>250+</td>
                                <td>€50M+ turnover OR €43M+ balance</td>
                            </tr>
                            <tr>
                                <td><strong>Medium</strong></td>
                                <td>50-249</td>
                                <td>€10M-50M turnover OR €10M-43M balance</td>
                            </tr>
                            <tr>
                                <td><strong>Small/Micro</strong></td>
                                <td>&lt;50</td>
                                <td>&lt;€10M turnover AND &lt;€10M balance</td>
                            </tr>
                        </tbody>
                    </table>
                    <p class="helper-text" style="margin-top: 10px;">Note: Organizations meeting EITHER employee OR financial threshold qualify for that size category.</p>
                </div>

                <div class="nav-buttons">
                    <button class="nav-button prev-button" onclick="previousStep()">Previous</button>
                    <button class="nav-button next-button" onclick="nextStep()" disabled id="next-2">Continue</button>
                </div>
            </div>

            <!-- Step 3: Geographic Scope -->
            <div class="assessment-step" id="step-3">
                <div class="step-header">
                    <h2 class="step-title">Where does your organization operate?</h2>
                    <p class="step-description">Select all that apply to your operations.</p>
                </div>

                <div class="form-group">
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="geo-established" onchange="validateStep()">
                            <label for="geo-established" class="checkbox-label">
                                Established in one or more EU Member States
                            </label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="geo-services" onchange="validateStep()">
                            <label for="geo-services" class="checkbox-label">
                                Provide services to customers in the EU
                            </label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="geo-infrastructure" onchange="validateStep()">
                            <label for="geo-infrastructure" class="checkbox-label">
                                Operate critical infrastructure located in the EU
                            </label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="geo-data" onchange="validateStep()">
                            <label for="geo-data" class="checkbox-label">
                                Process data of EU citizens/entities
                            </label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="member-states">In how many EU Member States do you operate?</label>
                    <select id="member-states" onchange="validateStep()">
                        <option value="">-- Select --</option>
                        <option value="1">1</option>
                        <option value="2-5">2-5</option>
                        <option value="6-10">6-10</option>
                        <option value="11-20">11-20</option>
                        <option value="21-27">21-27</option>
                    </select>
                </div>

                <div class="nav-buttons">
                    <button class="nav-button prev-button" onclick="previousStep()">Previous</button>
                    <button class="nav-button next-button" onclick="nextStep()" disabled id="next-3">Continue</button>
                </div>
            </div>

            <!-- Step 4: Special Designations -->
            <div class="assessment-step" id="step-4">
                <div class="step-header">
                    <h2 class="step-title">Do any of the following apply?</h2>
                    <p class="step-description">Select all special designations that apply to your organization.</p>
                </div>

                <div class="form-group">
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="special-cer" onchange="validateStep()">
                            <label for="special-cer" class="checkbox-label">
                                Designated as critical entity under EU Critical Entities Resilience Directive (CER)
                            </label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="special-nis1" onchange="validateStep()">
                            <label for="special-nis1" class="checkbox-label">
                                Designated as operator of essential services under original NIS Directive
                            </label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="special-sole" onchange="validateStep()">
                            <label for="special-sole" class="checkbox-label">
                                Sole provider of a service essential for critical societal/economic activities in a Member State
                            </label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="special-systemic" onchange="validateStep()">
                            <label for="special-systemic" class="checkbox-label">
                                Disruption to your service would have significant systemic impact
                            </label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="special-trust" onchange="validateStep()">
                            <label for="special-trust" class="checkbox-label">
                                You are a trust service provider (qualified or non-qualified)
                            </label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="special-dns" onchange="validateStep()">
                            <label for="special-dns" class="checkbox-label">
                                You are a TLD registry or DNS service provider
                            </label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="special-comms" onchange="validateStep()">
                            <label for="special-comms" class="checkbox-label">
                                You are a public electronic communications network/service provider
                            </label>
                        </div>
                    </div>
                    <p class="helper-text">Note: Any 'yes' answer may result in Essential Entity classification regardless of size.</p>
                </div>

                <div class="nav-buttons">
                    <button class="nav-button prev-button" onclick="previousStep()">Previous</button>
                    <button class="nav-button next-button" onclick="nextStep()">Continue</button>
                </div>
            </div>

            <!-- Step 5: Exclusions Check -->
            <div class="assessment-step" id="step-5">
                <div class="step-header">
                    <h2 class="step-title">Do any of the following exclusions apply?</h2>
                    <p class="step-description">These exclusions may exempt your organization from NIS2 requirements.</p>
                </div>

                <div class="form-group">
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="exclude-security" onchange="validateStep()">
                            <label for="exclude-security" class="checkbox-label">
                                National security, defense, or law enforcement entity
                            </label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="exclude-judiciary" onchange="validateStep()">
                            <label for="exclude-judiciary" class="checkbox-label">
                                Judiciary, parliament, or central bank
                            </label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="exclude-member" onchange="validateStep()">
                            <label for="exclude-member" class="checkbox-label">
                                Entity excluded by specific Member State for national security reasons
                            </label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="exclude-eu" onchange="validateStep()">
                            <label for="exclude-eu" class="checkbox-label">
                                Activities fall outside scope of EU law
                            </label>
                        </div>
                    </div>
                    <p class="helper-text">Note: These exclusions are narrowly interpreted. When in doubt, assume NIS2 applies.</p>
                </div>

                <div class="nav-buttons">
                    <button class="nav-button prev-button" onclick="previousStep()">Previous</button>
                    <button class="nav-button next-button" onclick="calculateResults()">View Results</button>
                </div>
            </div>
        </div>

        <!-- Results Screen -->
        <div class="results-screen" id="results">
            <!-- Classification will be inserted here -->
            <div id="classification-result"></div>

            <!-- Obligations will be inserted here -->
            <div id="obligations-result"></div>

            <!-- HYPERION Relevance Section -->
            <div class="hyperion-section">
                <h3 class="hyperion-title">HOW HYPERION ADDRESSES NIS2 REQUIREMENTS</h3>
                <p class="hyperion-intro">
                    NIS2 Article 21 mandates robust identity and access management for covered entities. 
                    As organizations adopt photonic AI infrastructure, these requirements extend to compute nodes.
                </p>

                <div class="hyperion-table">
                    <table>
                        <thead>
                            <tr>
                                <th>NIS2 Requirement</th>
                                <th>HYPERION Capability</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Access control policies</td>
                                <td>eIDAS 2.0 verified node identity via MyD Wallet</td>
                            </tr>
                            <tr>
                                <td>Multi-factor authentication</td>
                                <td>DID/VC-based cryptographic node authentication</td>
                            </tr>
                            <tr>
                                <td>Audit trails and logging</td>
                                <td>Immutable compliance logging via DataLake integration</td>
                            </tr>
                            <tr>
                                <td>Supply chain security</td>
                                <td>Verified identity for all federated compute participants</td>
                            </tr>
                            <tr>
                                <td>Incident handling</td>
                                <td>Complete node attestation for forensic investigation</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="cta-buttons">
                    <button class="cta-button cta-primary" onclick="downloadResults()">Download Assessment Results (PDF)</button>
                    <a href="index.html" class="cta-button cta-secondary">Learn How HYPERION Helps →</a>
                    <a href="mailto:hyperion@e-group.com" class="cta-button cta-secondary">Request Consultation</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <p class="footer-disclaimer">
            This tool provides general guidance only and does not constitute legal advice. 
            Consult qualified legal counsel for definitive NIS2 compliance determination.
        </p>
        <div class="footer-links">
            <a href="index.html">HYPERION Main</a>
            <a href="eidas-readiness.html">Try eIDAS Readiness Scanner</a>
            <a href="mailto:hyperion@e-group.com">Contact</a>
        </div>
        <p class="copyright">© 2024 E-Group. All rights reserved.</p>
    </footer>

    <script>
        let currentStep = 1;
        const totalSteps = 5;

        // Assessment data
        let assessmentData = {
            sector: '',
            employees: 0,
            turnover: 0,
            balance: 0,
            geographic: [],
            memberStates: '',
            specialDesignations: [],
            exclusions: []
        };

        // Sector categories
        const ANNEX_I = ['energy', 'transport', 'banking', 'financial-infrastructure', 'health', 
                         'drinking-water', 'waste-water', 'digital-infrastructure', 'ict-service', 
                         'public-admin', 'space'];
        const ANNEX_II = ['postal', 'waste', 'chemicals', 'food', 'manufacturing', 
                          'digital-providers', 'research'];

        function startAssessment() {
            document.getElementById('welcome').classList.remove('active');
            document.getElementById('assessment').classList.add('active');
            updateProgress();
        }

        function updateProgress() {
            const progress = (currentStep / totalSteps) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            
            // Update step indicators
            for (let i = 1; i <= totalSteps; i++) {
                const indicator = document.getElementById(`step-${i}-indicator`);
                if (i < currentStep) {
                    indicator.classList.remove('active');
                    indicator.classList.add('completed');
                } else if (i === currentStep) {
                    indicator.classList.add('active');
                    indicator.classList.remove('completed');
                } else {
                    indicator.classList.remove('active', 'completed');
                }
            }
        }

        function validateStep() {
            let isValid = false;
            
            switch(currentStep) {
                case 1:
                    const sector = document.getElementById('sector').value;
                    isValid = sector !== '';
                    assessmentData.sector = sector;
                    
                    // Update helper text
                    const helpText = document.getElementById('sector-help');
                    if (sector && ANNEX_I.includes(sector)) {
                        helpText.textContent = 'This is a Highly Critical Sector under Annex I';
                        helpText.style.color = 'var(--orange)';
                    } else if (sector && ANNEX_II.includes(sector)) {
                        helpText.textContent = 'This is an Other Critical Sector under Annex II';
                        helpText.style.color = 'var(--yellow)';
                    } else if (sector === 'other') {
                        helpText.textContent = 'This sector may not be directly covered by NIS2';
                        helpText.style.color = 'var(--green)';
                    } else {
                        helpText.textContent = '';
                    }
                    break;
                    
                case 2:
                    const employees = document.getElementById('employees').value;
                    const turnover = document.getElementById('turnover').value;
                    const balance = document.getElementById('balance').value;
                    isValid = employees !== '' && turnover !== '' && balance !== '';
                    if (isValid) {
                        assessmentData.employees = parseInt(employees);
                        assessmentData.turnover = parseInt(turnover);
                        assessmentData.balance = parseInt(balance);
                    }
                    break;
                    
                case 3:
                    const geoChecks = ['geo-established', 'geo-services', 'geo-infrastructure', 'geo-data'];
                    assessmentData.geographic = geoChecks.filter(id => document.getElementById(id).checked);
                    assessmentData.memberStates = document.getElementById('member-states').value;
                    isValid = assessmentData.geographic.length > 0 && assessmentData.memberStates !== '';
                    break;
                    
                case 4:
                    const specialChecks = ['special-cer', 'special-nis1', 'special-sole', 'special-systemic',
                                         'special-trust', 'special-dns', 'special-comms'];
                    assessmentData.specialDesignations = specialChecks.filter(id => document.getElementById(id).checked);
                    isValid = true; // This step is optional
                    break;
                    
                case 5:
                    const excludeChecks = ['exclude-security', 'exclude-judiciary', 'exclude-member', 'exclude-eu'];
                    assessmentData.exclusions = excludeChecks.filter(id => document.getElementById(id).checked);
                    isValid = true; // This step is optional
                    break;
            }
            
            // Enable/disable next button
            const nextButton = document.getElementById(`next-${currentStep}`);
            if (nextButton) {
                nextButton.disabled = !isValid;
            }
            
            return isValid;
        }

        function nextStep() {
            if (currentStep < totalSteps && validateStep()) {
                document.getElementById(`step-${currentStep}`).classList.remove('active');
                currentStep++;
                document.getElementById(`step-${currentStep}`).classList.add('active');
                updateProgress();
                
                // Focus on first input of new step
                const newStep = document.getElementById(`step-${currentStep}`);
                const firstInput = newStep.querySelector('input, select');
                if (firstInput) {
                    setTimeout(() => firstInput.focus(), 300);
                }
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                document.getElementById(`step-${currentStep}`).classList.remove('active');
                currentStep--;
                document.getElementById(`step-${currentStep}`).classList.add('active');
                updateProgress();
            }
        }

        function calculateResults() {
            // Hide assessment, show results
            document.getElementById('assessment').classList.remove('active');
            document.getElementById('results').classList.add('active');
            
            // Calculate classification
            let classification = '';
            let basis = '';
            let obligations = {};
            
            // Check exclusions first
            if (assessmentData.exclusions.length > 0) {
                classification = 'excluded';
                basis = 'Organization falls under NIS2 exclusions';
            }
            // Check special designations - automatic Essential
            else if (assessmentData.specialDesignations.length > 0) {
                classification = 'essential';
                basis = 'Special designation as critical infrastructure';
            }
            // Check sector and size
            else if (ANNEX_I.includes(assessmentData.sector)) {
                if (isLargeOrMedium()) {
                    classification = 'essential';
                    basis = `Annex I sector (${formatSector(assessmentData.sector)}) meeting size thresholds`;
                } else {
                    classification = 'likely-not';
                    basis = 'Annex I sector but below size thresholds';
                }
            }
            else if (ANNEX_II.includes(assessmentData.sector)) {
                if (isLargeOrMedium()) {
                    classification = 'important';
                    basis = `Annex II sector (${formatSector(assessmentData.sector)}) meeting size thresholds`;
                } else {
                    classification = 'not-in-scope';
                    basis = 'Annex II sector but below size thresholds';
                }
            }
            else {
                classification = 'not-in-scope';
                basis = 'Sector not covered by NIS2 Directive';
            }
            
            // Display results
            displayResults(classification, basis);
        }

        function isLargeOrMedium() {
            return assessmentData.employees >= 50 || 
                   assessmentData.turnover >= 10000000 || 
                   assessmentData.balance >= 10000000;
        }

        function isLarge() {
            return assessmentData.employees >= 250 || 
                   assessmentData.turnover >= 50000000 || 
                   assessmentData.balance >= 43000000;
        }

        function formatSector(sector) {
            const sectorNames = {
                'energy': 'Energy',
                'transport': 'Transport',
                'banking': 'Banking',
                'financial-infrastructure': 'Financial Market Infrastructure',
                'health': 'Health',
                'drinking-water': 'Drinking Water',
                'waste-water': 'Waste Water',
                'digital-infrastructure': 'Digital Infrastructure',
                'ict-service': 'ICT Service Management',
                'public-admin': 'Public Administration',
                'space': 'Space',
                'postal': 'Postal and Courier Services',
                'waste': 'Waste Management',
                'chemicals': 'Chemicals',
                'food': 'Food',
                'manufacturing': 'Manufacturing',
                'digital-providers': 'Digital Providers',
                'research': 'Research Organizations'
            };
            return sectorNames[sector] || sector;
        }

        function displayResults(classification, basis) {
            const classificationDiv = document.getElementById('classification-result');
            const obligationsDiv = document.getElementById('obligations-result');
            
            if (classification === 'essential') {
                classificationDiv.innerHTML = `
                    <div class="classification-card essential">
                        <div class="classification-header">
                            <div class="classification-icon essential">⚠️</div>
                            <div class="classification-title">
                                <h2>YOUR CLASSIFICATION: ESSENTIAL ENTITY</h2>
                                <p class="classification-subtitle">
                                    Based on your inputs, your organization is classified as an ESSENTIAL ENTITY under NIS2 Directive Annex I.
                                </p>
                            </div>
                        </div>
                        <div class="classification-details">
                            <div class="detail-row">
                                <span class="detail-label">Sector:</span>
                                <span class="detail-value">${formatSector(assessmentData.sector)}</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Basis:</span>
                                <span class="detail-value">${basis}</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Legal Reference:</span>
                                <span class="detail-value">NIS2 Directive Article 3(1), Annex I</span>
                            </div>
                        </div>
                    </div>
                `;
                
                obligationsDiv.innerHTML = `
                    <div class="obligations-card">
                        <h3 class="obligations-title">ESSENTIAL ENTITY OBLIGATIONS</h3>
                        
                        <div class="obligation-section">
                            <h4>Supervision Regime:</h4>
                            <ul class="obligation-list">
                                <li>Ex-ante supervision (proactive audits and inspections)</li>
                                <li>Member State authority can conduct on-site inspections at any time</li>
                            </ul>
                        </div>
                        
                        <div class="obligation-section">
                            <h4>Security Requirements (Article 21):</h4>
                            <ul class="obligation-list checkbox-list">
                                <li>Risk analysis and information system security policies</li>
                                <li>Incident handling procedures</li>
                                <li>Business continuity and crisis management</li>
                                <li>Supply chain security</li>
                                <li>Security in network acquisition, development, maintenance</li>
                                <li>Vulnerability handling and disclosure</li>
                                <li>Cybersecurity assessment and testing</li>
                                <li>Cryptography and encryption policies</li>
                                <li>Human resources security and access control</li>
                                <li>Multi-factor authentication and secure communications</li>
                            </ul>
                        </div>
                        
                        <div class="obligation-section">
                            <h4>Incident Reporting (Article 23):</h4>
                            <ul class="obligation-list">
                                <li>24 hours: Early warning to CSIRT/authority</li>
                                <li>72 hours: Incident notification with initial assessment</li>
                                <li>1 month: Final report with root cause and remediation</li>
                            </ul>
                        </div>
                        
                        <div class="obligation-section">
                            <h4>Identity & Access Requirements:</h4>
                            <ul class="obligation-list">
                                <li>Verified identity for all personnel with system access</li>
                                <li>Secure authentication mechanisms</li>
                                <li>Access logging and audit trails</li>
                                <li>Supply chain identity verification</li>
                            </ul>
                        </div>
                        
                        <div class="obligation-section">
                            <h4>Penalties:</h4>
                            <ul class="obligation-list">
                                <li>Up to €10,000,000 or 2% of global annual turnover (whichever is higher)</li>
                                <li>Management body can be held personally liable</li>
                                <li>Potential temporary prohibition from exercising management functions</li>
                            </ul>
                        </div>
                    </div>
                `;
            } else if (classification === 'important') {
                classificationDiv.innerHTML = `
                    <div class="classification-card important">
                        <div class="classification-header">
                            <div class="classification-icon important">⚡</div>
                            <div class="classification-title">
                                <h2>YOUR CLASSIFICATION: IMPORTANT ENTITY</h2>
                                <p class="classification-subtitle">
                                    Based on your inputs, your organization is classified as an IMPORTANT ENTITY under NIS2 Directive Annex II.
                                </p>
                            </div>
                        </div>
                        <div class="classification-details">
                            <div class="detail-row">
                                <span class="detail-label">Sector:</span>
                                <span class="detail-value">${formatSector(assessmentData.sector)}</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Basis:</span>
                                <span class="detail-value">${basis}</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Legal Reference:</span>
                                <span class="detail-value">NIS2 Directive Article 3(2), Annex II</span>
                            </div>
                        </div>
                    </div>
                `;
                
                obligationsDiv.innerHTML = `
                    <div class="obligations-card">
                        <h3 class="obligations-title">IMPORTANT ENTITY OBLIGATIONS</h3>
                        
                        <div class="obligation-section">
                            <h4>Supervision Regime:</h4>
                            <ul class="obligation-list">
                                <li>Ex-post supervision (reactive, triggered by evidence of non-compliance)</li>
                                <li>Inspections conducted when incidents or evidence warrant</li>
                            </ul>
                        </div>
                        
                        <div class="obligation-section">
                            <h4>Security Requirements (Article 21):</h4>
                            <ul class="obligation-list checkbox-list">
                                <li>Same 10 security measures as Essential Entities</li>
                                <li>Proportionate implementation based on risk exposure</li>
                            </ul>
                        </div>
                        
                        <div class="obligation-section">
                            <h4>Incident Reporting (Article 23):</h4>
                            <ul class="obligation-list">
                                <li>Same timeline as Essential Entities</li>
                                <li>24h early warning, 72h notification, 1 month final report</li>
                            </ul>
                        </div>
                        
                        <div class="obligation-section">
                            <h4>Identity & Access Requirements:</h4>
                            <ul class="obligation-list">
                                <li>Same identity and access controls as Essential Entities</li>
                                <li>May have proportionate implementation</li>
                            </ul>
                        </div>
                        
                        <div class="obligation-section">
                            <h4>Penalties:</h4>
                            <ul class="obligation-list">
                                <li>Up to €7,000,000 or 1.4% of global annual turnover (whichever is higher)</li>
                                <li>Management body liability provisions apply</li>
                            </ul>
                        </div>
                    </div>
                `;
            } else {
                classificationDiv.innerHTML = `
                    <div class="classification-card not-in-scope">
                        <div class="classification-header">
                            <div class="classification-icon not-in-scope">✓</div>
                            <div class="classification-title">
                                <h2>LIKELY NOT IN SCOPE</h2>
                                <p class="classification-subtitle">
                                    Based on your inputs, your organization does not appear to be directly subject to NIS2 Directive obligations.
                                </p>
                            </div>
                        </div>
                        <div class="classification-details">
                            <div class="detail-row">
                                <span class="detail-label">Reason:</span>
                                <span class="detail-value">${basis}</span>
                            </div>
                        </div>
                    </div>
                `;
                
                obligationsDiv.innerHTML = `
                    <div class="obligations-card">
                        <h3 class="obligations-title">IMPORTANT CONSIDERATIONS</h3>
                        
                        <p style="margin-bottom: 25px; color: var(--text-secondary);">
                            Even if not directly in scope, you may still be affected:
                        </p>
                        
                        <div class="obligation-section">
                            <h4>⚠️ Supply Chain Requirements</h4>
                            <p style="color: var(--text-secondary); line-height: 1.6;">
                                Essential and Important Entities must ensure supply chain security — 
                                they may require NIS2-equivalent controls from suppliers like you.
                            </p>
                        </div>
                        
                        <div class="obligation-section">
                            <h4>⚠️ Member State Designation</h4>
                            <p style="color: var(--text-secondary); line-height: 1.6;">
                                Individual Member States can designate additional entities as Essential 
                                if they meet certain criteria.
                            </p>
                        </div>
                        
                        <div class="obligation-section">
                            <h4>⚠️ Contractual Requirements</h4>
                            <p style="color: var(--text-secondary); line-height: 1.6;">
                                Customers subject to NIS2 may contractually require you to meet 
                                NIS2-equivalent security standards.
                            </p>
                        </div>
                        
                        <div class="obligation-section">
                            <h4>⚠️ Future Scope Expansion</h4>
                            <p style="color: var(--text-secondary); line-height: 1.6;">
                                NIS2 scope may expand in future revisions. Building compliant 
                                infrastructure now reduces future risk.
                            </p>
                        </div>
                    </div>
                `;
            }
            
            // Scroll to top of results
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function downloadResults() {
            // In a real implementation, this would generate a PDF
            // For now, we'll trigger print dialog
            window.print();
        }
        
        // No JavaScript needed for simple back link navigation
    </script>
</body>
</html>